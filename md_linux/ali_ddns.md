# 最低成本建站的教程


需要的材料:
1. 阿里云购买的域名
2. 一台低功耗的设备（废弃手机，废弃平板，树莓派zero，或者其他ARM/x86设备，只要你觉得低功耗就行）
3. 公网IP（电信的一般打电话给客服就能申请到，20小时左右会变动一个IP，其他运营商请自行咨询办理。）
4. 提前下载好对应平台的jdk文件(其实语言能调用阿里云的api都行，请自行探索)


### 1.首先需要确保自己的IP是否为公网的


1. 进入http://www.net.cn/static/customercare/yourIP.asp 查看自己的IP
2. Windows系统进入cmd/powershell输入: tracert <刚才获取的IP>
3. 如果显示两行，则很大概率说明是拥有公网IP的，因为目前运营商赠送的光猫，很多是和路由器一体的，如果你还接一个路由器就会这样。


### 2.根据情况设置光猫和路由器


0. 如果是只使用一个带局域网功能的光猫，其实要更简单，就是不怎么符合实际情况。
1. 首先把要映射到外网的设备设置为DMZ主机（端口映射在光猫上做，没必要在路由器在设置一次），路由器设置完毕。
2. 根据光猫底下的信息，进入到电信光猫的配置页面，进入高级设置，填写端口映射的信息(端口映射对外设置80或者8080是没有用的，尝试一下就知道了)，IP地址就填写路由器的地址，光猫也设置完成(如果以后要添加新的端口可以在这里设置)
3. 两边都设置完，可以利用上面获取到的公网IP地址测试下：
    (1). DMZ主机上安装nginx:`sudo apt-get install nginx `
    (2). 修改nginx默认访问端口:`sudo vim /etc/nginx/sites-available/default`;把80端口改成你映射的内网端口
    (3). 运行nginx:sudo service nginx start
    (4). 如果能正常访问 {公网ip}:端口号 进入nginx默认首页，那说明公网IP已经正常设置好了


### 3.利用阿里ddns实现ip自动解析到域名

1. 这里用jdk来做循环的调用，java代码可以参考官网:`123`
2. 利用linux的cron功能，定时重启，提高调用服务的持续性
3. 把写好的jar包启动脚本加进系统启动的列表里